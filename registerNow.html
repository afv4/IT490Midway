<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="">
		<meta name="author" content="Skeleton by our lord and saviour DJ Kehoe... the scraps by Ayrton Ventura">
		<link rel="icon" href="favicon.ico">

		<title>Registration Page</title>

		<!-- Bootstrap core CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">

		<!-- Custom styles for this template -->
		<link href="signin.css" rel="stylesheet">
	</head>

	<body>
    <div id = "output">
	Registration Page!<p>
    </div>
    <div class="container">
      <form class="form-signin">
        <h2 class="form-signin-heading">Make a new account below!</h2>
        <label for="inputName" class="sr-only">Username</label>
        <input type="username" id="inputName" class="form-control" placeholder="Username" required autofocus>
        <label for="inputPassword" class="sr-only">Password</label>
        <input type="password" id="inputPassword" class="form-control" placeholder="Password" required>
        <button class="btn btn-lg btn-primary btn-block" type="button" onclick="submitRegistration()">Create Account Now!</button>
      </form>
    </div>

				<script src="js/ie10-viewport-bug-workaround.js"></script>
			<script>
		function submitRegistration()
		{
			var uname = document.getElementById("inputName").value;
			var pword = document.getElementById("inputPassword").value;
			sendRegistrationRequest(uname,pword);
			return 0;
		}
		function HandleRegistrationResponse(response)
		{
			var text = JSON.parse(response);
			document.getElementById("output").innerHTML = text+"<p>";
		}
		function sendRegistrationRequest(username,password)
		{
			var request = new XMLHttpRequest();
			request.open("POST","login.php",true);
			request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
			request.onreadystatechange= function ()
			{

				if ((this.readyState == 4)&&(this.status == 200))
				{
					HandleRegistrationResponse(this.responseText);
				}
			}
			request.send("type=register&uname="+username+"&pword="+password);
		}

		</script>

	</body>
</html>
